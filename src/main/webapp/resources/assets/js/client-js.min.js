function initializeLoad($scope,$timeout){$scope.start(),$scope.fakeIntro=!0,$timeout(function(){$scope.complete(),$scope.fakeIntro=!1,initializeHighLight()},750)}function initializeHighLight(){$("pre code").each(function(i,block){hljs.highlightBlock(block)})}var pBlogApp={},app=angular.module("pBlogApp",["chieffancypants.loadingBar","ngAnimate","ngRoute","ngSanitize","pBlogApp.filters","pBlogApp.services","pBlogApp.directives"]).config(function($routeProvider){$routeProvider.when("/index",{templateUrl:"/index/layout",controller:IndexController}),$routeProvider.when("/archives",{templateUrl:"/archives/layout",controller:ArchivesController}),$routeProvider.when("/category",{templateUrl:"/category/layout",controller:CategoryController}),$routeProvider.when("/archives/:timeStamp",{templateUrl:"/archives/layout",controller:ArchivesTimeStampController}),$routeProvider.when("/category/:categorySlug",{templateUrl:"/category/layout",controller:CategorySlugController}),$routeProvider.when("/article/:articleSlug",{templateUrl:"/article/slug/layout",controller:ArticleController}),$routeProvider.otherwise({redirectTo:"/index"})}).config(function(cfpLoadingBarProvider){cfpLoadingBarProvider.includeSpinner=!0}).controller("loadingBar",function($scope,$http,$timeout,cfpLoadingBar){$scope.start=function(){cfpLoadingBar.start()},$scope.complete=function(){cfpLoadingBar.complete()}});
var AppDirectives=angular.module("pBlogApp.directives",[]);AppDirectives.directive("appVersion",["version",function(version){return function(scope,elm,attrs){elm.text(version)}}]);
var AppFilters=angular.module("pBlogApp.filters",[]);AppFilters.filter("interpolate",["version",function(version){return function(text){return String(text).replace(/\%VERSION\%/gm,version)}}]);

var AppServices=angular.module("pBlogApp.services",[]);AppServices.value("version","0.1");
function initializeArchives(){$(".menu_bar ul li").each(function(index){1==index?$(this).addClass("active"):$(this).removeClass("active")})}var ArchivesController=function($scope,$interval,$http,$timeout){$scope.fetchArchivesList=function(){$http.get("/archivesList.json").success(function(data){initializeArchives(),$scope.archivesList=data.archivesVOList,$scope.articleList=data.archivesVOList[0].articleInfoVOList,initializeLoad($scope,$timeout)}).error(function(err){console.log(err)})},$scope.fetchArchivesList()};
function initializeArchivesTimeStamp(){$(".menu_bar ul li").each(function(index){1==index?$(this).addClass("active"):$(this).removeClass("active")})}var ArchivesTimeStampController=function($scope,$interval,$http,$timeout,$routeParams){var timeStamp=$routeParams.timeStamp;$scope.fetchArchivesTimeStampList=function(){$http.get("/archives/"+timeStamp+".json").success(function(data){initializeArchivesTimeStamp(),initializeLoad($scope,$timeout),$scope.archivesList=data.archivesVOList,$scope.articleList=data.articleInfoVOList,$scope.timeStamp=timeStamp}).error(function(err){console.log(err)})},$scope.fetchArchivesTimeStampList()};
function initializeArticleSlug(){$(".menu_bar ul li").each(function(){$(this).removeClass("active")})}var ArticleController=function($scope,$interval,$http,$timeout,$routeParams){var articleSlug=$routeParams.articleSlug;$scope.fetchArticle=function(){$http.get("/article/"+articleSlug+".json").success(function(data){initializeArticleSlug(),console.log("测试结果"),console.log(data)})}};
function initializeCategory(){$(".menu_bar ul li").each(function(index){2==index?$(this).addClass("active"):$(this).removeClass("active")})}var CategoryController=function($scope,$interval,$http,$timeout){$scope.fetchCategoryList=function(){$http.get("/categoryList.json").success(function(data){initializeCategory(),$scope.categoryList=data.categoryInfoVOList,$scope.articleList=data.articleInfoVOList,initializeLoad($scope,$timeout)}).error(function(err){console.log(err)})},$scope.fetchCategoryList()};
function initializeCategorySlug(){$(".menu_bar ul li").each(function(index){2==index?$(this).addClass("active"):$(this).removeClass("active")})}var CategorySlugController=function($scope,$interval,$http,$timeout,$routeParams){var categorySlug=$routeParams.categorySlug;$scope.fetchCategorySlugList=function(){$http.get("/category/"+categorySlug+".json").success(function(data){initializeCategorySlug(),$scope.categoryList=data.categoryInfoVOList,$scope.articleList=data.articleInfoVOList,initializeLoad($scope,$timeout)}).error(function(err){console.log(err)})},$scope.fetchCategorySlugList()};
function initializeIndex(content_md){var $contentBody=$(".content-body");$(".menu_bar ul li").each(function(index){0==index?$(this).addClass("active"):$(this).removeClass("active")}),$contentBody.html(marked(content_md)),loadSlider()}function loadSlider(){var $container=$(".scroll-area"),$content=$(".article-list"),$slideArea=$(".scroll-vertical"),$bar=$(".scroll-bar");$container.slider({container:$container,content:$content,slideArea:$slideArea,bar:$bar})}function loadCss(){$("<link>").attr({rel:"stylesheet",type:"text/css",href:"/resources/css/index.css"}).appendTo("head")}var IndexController=function($scope,$interval,$http,$timeout){$scope.fetchArticlesList=function(){$http.get("/topTenArticle.json").success(function(data){$scope.detail=data.detail,$scope.articleList=data.pagination.items,$scope.f_article=data.firstArticle,initializeIndex($scope.f_article.content),initializeLoad($scope,$timeout)}).error(function(err){console.log(err)})},$scope.fetchArticlesList()};